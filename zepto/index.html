<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="stoneniqiu">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>Zepto+SUI</title>
    <link href="css/sm.min.css" rel="stylesheet" />
    <link href="css/sm-extend.min.css" rel="stylesheet" />
    <script src="js/zepto.min.js"></script>
    <link href="css/style.css" rel="stylesheet" />

</head>

<!--
    1.页面：主页，左页，右页，页面滑动。
    2.弹框
    3.list + 搜索
    4.ajax
    5.form
    6.上下拉动
 -->
<body >
    <div class="page-group">
        <div id="home" class="page page-current">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">首页</h1>
            </header>
            <nav id="footertabs" class="bar bar-tab">
                <a class="tab-item active" href="#home">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item " href="#miti">
                    <span class="icon icon-edit"></span>
                    <span class="tab-label">我要出题</span>
                </a>
                <a class="tab-item " href="#user">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">个人中心</span>
                </a>
                <a class="tab-item" href="#firends">
                    <span class="icon icon-friends"></span>
                    <span class="tab-label">我的好友</span>
                </a>
                <a class="tab-item " href="#message">
                    <span class="icon icon-message"></span>
                    <span class="tab-label">我的消息</span>
                </a>
            </nav>
            <div class="content">
                <div class="swiper-container" data-space-between='10'>
                    <div class="swiper-wrapper">
                        <div class="swiper-slide"><img src="css/images/b1.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="css/images/b2.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="css/images/b3.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="css/images/b4.jpg" alt=""></div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
                <h3>按钮</h3>
                <div class="content-block">
                    <p><a href="#" class="button button-fill alert-text-title-callback">alert-text-title-callback</a></p>
                    <p><a href="#" id="toast" class="button button-fill button-success ">toast </a></p>
                    <p><a href="#" class="button button-fill button-danger">Fill Button </a></p>
                    <p><a href="#" class="button button-fill button-warning">Fill Button </a></p>
                </div>
            
            </div>
        </div>
        <div id="message" class="page">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">我的消息-下拉刷新</h1>
            </header>
            <nav id="footertabs" class="bar bar-tab">
                <a class="tab-item" href="#home">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item " href="#miti">
                    <span class="icon icon-edit"></span>
                    <span class="tab-label">我要出题</span>
                </a>
                <a class="tab-item " href="#user">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">个人中心</span>
                </a>
                <a class="tab-item" href="#firends">
                    <span class="icon icon-friends"></span>
                    <span class="tab-label">我的好友</span>
                </a>
                <a class="tab-item active" href="#message">
                    <span class="icon icon-message"></span>
                    <span class="tab-label">我的消息</span>
                </a>
            </nav>
            <div class="content pull-to-refresh-content infinite-scroll infinite-scroll-bottom" data-ptr-distance="55" data-distance="100">
                <div class="pull-to-refresh-layer">
                    <div class="preloader"></div>
                    <div class="pull-to-refresh-arrow"></div>
                </div>
                <div class="card-container">
                    <div class="card">
                        <div class="card-header">card</div>
                        <div class="card-content">
                            <div class="card-content-inner">
                                这里是第1个card，下拉刷新会出现第2个card。
                            </div>
                        </div>
                    </div>
                </div>
                <div class="list-block">
                    <ul class="list-container">
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 1</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 2</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 3</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 4</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 5</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 6</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 7</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 8</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 9</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 10</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 11</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 12</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 13</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 14</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 15</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 16</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 17</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 18</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 19</div></div></li>
                        <li class="item-content"><div class="item-inner"><div class="item-title">Item 20</div></div></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="firends" class="page">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">我的好友</h1>
            </header>
            <nav id="footertabs" class="bar bar-tab">
                <a class="tab-item" href="#home">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item " href="#miti">
                    <span class="icon icon-edit"></span>
                    <span class="tab-label">我要出题</span>
                </a>
                <a class="tab-item " href="#user">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">个人中心</span>
                </a>
                <a class="tab-item active" href="#firends">
                    <span class="icon icon-friends"></span>
                    <span class="tab-label">我的好友</span>
                </a>
                <a class="tab-item " href="#message">
                    <span class="icon icon-message"></span>
                    <span class="tab-label">我的消息</span>
                </a>
            </nav>
            <div class="content">
                <div class="list-block contacts-block">
                    <div class="list-group">
                        <ul>

                            <li class="list-group-title">J</li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">揭迷达人</a></div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-title">T</li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">test1</a></div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">test2</a></div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">test3</a></div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">test4</a></div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">test5</a></div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-title">Z</li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><a href="#">张百万</a></div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>

                </div>
            </div>
        </div>
        <div id="miti" class="page ">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">谜题</h1>
            </header>
            <nav id="footertabs" class="bar bar-tab">
                <a class="tab-item " href="#home">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item active" href="#miti">
                    <span class="icon icon-edit"></span>
                    <span class="tab-label">我要出题</span>
                </a>
                <a class="tab-item " href="#user">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">个人中心</span>
                </a>
                <a class="tab-item" href="#firends">
                    <span class="icon icon-friends"></span>
                    <span class="tab-label">我的好友</span>
                </a>
                <a class="tab-item " href="#message">
                    <span class="icon icon-message"></span>
                    <span class="tab-label">我的消息</span>
                </a>
            </nav>
            <div class="content">
                <div class="content-block row">
                    <div class="col-50"><a href="#" class="button pb-standalone">Standalone</a></div>
                    <div class="col-50"><a href="#" class="button pb-popup">Popup</a></div>
                </div>
                
                <div class="list-block">
                    <ul>
                        <!-- Text inputs -->
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-name"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">姓名</div>
                                    <div class="item-input">
                                        <input type="text" placeholder="Your name">
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-email"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">邮箱</div>
                                    <div class="item-input">
                                        <input type="email" placeholder="E-mail">
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-password"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">密码</div>
                                    <div class="item-input">
                                        <input type="password" placeholder="Password" class="">
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-gender"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">性别</div>
                                    <div class="item-input">
                                        <select>
                                            <option>Male</option>
                                            <option>Female</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <!-- Date -->
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">生日</div>
                                    <div class="item-input">
                                        <input type="date" placeholder="Birth day" value="2014-04-30">
                                    </div>
                                </div>
                            </div>
                        </li>
                        <!-- Switch (Checkbox) -->
                        <li>
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">开关</div>
                                    <div class="item-input">
                                        <label class="label-switch">
                                            <input type="checkbox">
                                            <div class="checkbox"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="align-top">
                            <div class="item-content">
                                <div class="item-media"><i class="icon icon-form-comment"></i></div>
                                <div class="item-inner">
                                    <div class="item-title label">文本域</div>
                                    <div class="item-input">
                                        <textarea></textarea>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="content-block">
                    <div class="row">
                        <div class="col-50"><a href="#" class="button button-big button-fill button-danger">取消</a></div>
                        <div class="col-50"><a href="#" class="button button-big button-fill button-success">提交</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="user" class="page ">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">用户中心</h1>
            </header>
            <nav id="footertabs" class="bar bar-tab">
                <a class="tab-item " href="#home">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item " href="#miti">
                    <span class="icon icon-edit"></span>
                    <span class="tab-label">我要出题</span>
                </a>
                <a class="tab-item active" href="#user">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">个人中心</span>
                </a>
                <a class="tab-item " href="#firends">
                    <span class="icon icon-friends"></span>
                    <span class="tab-label">我的好友</span>
                </a>
                <a class="tab-item " href="#message">
                    <span class="icon icon-message"></span>
                    <span class="tab-label">我的消息</span>
                </a>
            </nav>
            <div class="content">
                <img src="css/images/m1.jpg" />
            </div>
        </div>
    </div>

    <script src="js/sm.min.js"></script>
    <script src="js/sm-extend.min.js"></script>
    <script>
        $.init();
        //页面初始化事件
        $(document).on("pageInit", function (e, pageId, $page) {
            console.log("pageInit pageId:", pageId);
        });

        $(document).on('click', '.alert-text-title-callback', function () {
            $.alert('Here goes alert text', 'Custom Title!', function () {
                $.alert('Button clicked!')
            });
        });

        $(document).on('click', '#toast', function () {
            $.toast('操作成功，正在跳转...', 2345, 'success top');
        });

        //下来刷新
        $(document).on('refresh', '.pull-to-refresh-content', function (e) {
            // 模拟2s的加载过程
            setTimeout(function () {
                var cardNumber = $(e.target).find('.card').length + 1;
                var cardHTML = '<div class="card">' +
                                  '<div class="card-header">card' + cardNumber + '</div>' +
                                  '<div class="card-content">' +
                                    '<div class="card-content-inner">' +
                                        '这里是第' + cardNumber + '个card，下拉刷新会出现第' + (cardNumber + 1) + '个card。' +
                                    '</div>' +
                                  '</div>' +
                              '</div>';

                $(e.target).find('.card-container').prepend(cardHTML);
                // 加载完毕需要重置
                $.pullToRefreshDone('.pull-to-refresh-content');
            }, 2000);
        });

        // 无限滚动
        // 加载flag
        var loading = false;
        // 最多可加载的条目
        var maxItems = 100;

        // 每次加载添加多少条目
        var itemsPerLoad = 20;

        function addItems(number, lastIndex) {
            // 生成新条目的HTML
            var html = '';
            for (var i = lastIndex + 1; i <= lastIndex + number; i++) {
                html += '<li class="item-content"><div class="item-inner"><div class="item-title">Item ' + i + '</div></div></li>';
            }
            // 添加新条目
            $('.infinite-scroll-bottom .list-container').append(html);

        }
        //预先加载20条
        addItems(itemsPerLoad, 0);

        // 上次加载的序号

        var lastIndex = 20;

        // 注册'infinite'事件处理函数
        $(document).on('infinite', '.infinite-scroll-bottom', function () {

            // 如果正在加载，则退出
            if (loading) return;

            // 设置flag
            loading = true;

            // 模拟1s的加载过程
            setTimeout(function () {
                // 重置加载flag
                loading = false;

                if (lastIndex >= maxItems) {
                    // 加载完毕，则注销无限加载事件，以防不必要的加载
                    $.detachInfiniteScroll($('.infinite-scroll'));
                    // 删除加载提示符
                    $('.infinite-scroll-preloader').remove();
                    return;
                }

                // 添加新条目
                addItems(itemsPerLoad, lastIndex);
                // 更新最后加载的序号
                lastIndex = $('.list-container li').length;
                //容器发生改变,如果是js滚动，需要刷新滚动
                $.refreshScroller();
            }, 1000);
        });


        //浏览器插件 有bug。 popup模式点几下就报错了
        var myPhotoBrowserStandalone = $.photoBrowser({
            photos: [
                'css/images/m1.jpg',
                'css/images/mm.jpg',
            ]
        });
        //点击时打开图片浏览器
        $(document).on('click', '.pb-standalone', function () {
            myPhotoBrowserStandalone.open();
        });

        /*=== Popup ===*/
        var myPhotoBrowserPopup = $.photoBrowser({
            photos: [
                 'css/images/m1.jpg',
                'css/images/mm.jpg',
            ],
            type: 'popup'
        });
        $(document).on('click', '.pb-popup', function () {
            myPhotoBrowserPopup.open();
        });



    </script>
</body>
</html>
